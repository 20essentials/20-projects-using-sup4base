---
import Introduction from '@/components/03/Introduction.astro';
import LogoutButton from '@/components/03/LogoutButton.astro';
import Layout from '@/layouts/Layout.astro';
---

<Layout title='Login and Register With Email'>
  <Introduction />
  <LogoutButton />
</Layout>

<style>
  body {
    height: 100vh;
    position: relative;
    display: flex;
    flex-wrap: wrap;
    place-content: center;
  }
</style>

<script>
  import { supabase } from '@/lib/supabase';
  import { PATH } from '@/components/03/path';

  document.addEventListener('DOMContentLoaded', async () => {
    const { error: sessionError, data: sessionData } =
      await supabase.auth.getSession();
    if (sessionError || !sessionData.session) {
      window.location.href = PATH.login;
    }
  });
</script>
